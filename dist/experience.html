<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VR Experience</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Poppins:wght@100..900&family=Lexend:wght@100..900&family=Libertinus+Serif:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  <style>
  
    body, html {
      margin: 0; 
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; /* Modern, clean sans-serif for body */
    }
    #scene { width: 100%; height: 100%; display: block; }
    .selection-screen { display: none; align-items: center; justify-content: center; height: 100%; position: fixed; inset: 0; z-index: 9999; pointer-events: auto; }
    .scene-select-wrap { max-width: 1100px; width: 100%; padding: 24px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; gap: 16px; }
    .scene-select-header { text-align: center; }
    .scene-select-header h2 { margin: 0 10px 10px 0; font-weight: 500; letter-spacing: 1px; font-family: 'Poppins', sans-serif; /* Geometric sans-serif for headings, award-winning feel */ }
    .scene-select-header p { margin: 0; opacity: 0.8; font-size: 5px; font-family: 'Inter', sans-serif; }
    .scenes-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 14px; width: 100%; }
    .scene-card { position: relative; padding: 18px; border-radius: 12px; background: rgba(255,255,255,0.04); color: #fff; border: 1px solid rgba(255,255,255,0.08); cursor: default; user-select: none; display: flex; flex-direction: column; align-items: center; gap: 8px; transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease; font-family: 'Inter', sans-serif; }
    .scene-card.unlocked { cursor: pointer; }
    .scene-card.unlocked:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(147,51,234,.2); border-color: rgba(147,51,234,.35); }
    .scene-card.locked { opacity: 0.5; }
    .scene-badge { font-size: 12px; padding: 3px 8px; border-radius: 999px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.12); font-family: 'Poppins', sans-serif; }
    .scene-title { font-weight: 500; letter-spacing: .5px; font-family: 'Poppins', sans-serif; }
    .lock-icon { width: 18px; height: 18px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.25); display: inline-flex; align-items: center; justify-content: center; font-size: 12px; opacity: 0.8; }
    .scene-card.selected { outline: 2px solid #7c3aed; box-shadow: 0 0 0 4px rgba(124,58,237,0.2); }
    .scene-select-actions { display: flex; gap: 10px; justify-content: center; margin-top: 6px; }
    .btn { padding: 10px 16px; border-radius: 999px; border: 0; cursor: pointer; letter-spacing: .8px; text-transform: uppercase; font-weight: 600; font-family: 'Inter', sans-serif; }
    .btn-primary { background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%); color: #fff; }
    .btn-secondary { background: transparent; color: #fff; border: 1px solid rgba(255,255,255,0.25); }
    .btn:disabled { opacity: .5; cursor: not-allowed; }
    .helper { font-size: 12px; opacity: .8; margin-top: 4px; font-family: 'Inter', sans-serif; }

    .mode-card {
      /* No background-image needed */
      background-image: none;

      /* 1. Semi-transparent background color (glass tint) */
      background-color: rgba(204, 207, 214, 0.27); /* Black tint, 65% opaque. Adjust as needed */

      /* 2. Backdrop blur effect */
      backdrop-filter: blur(18px); /* Increased blur again */
      -webkit-backdrop-filter: blur(18px); /* Safari */

      /* 3. Use the SVG shape as a MASK */
      mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1041 517' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.95355 277.948L44.4479 318.514C49.5684 324.206 52.4015 331.591 52.4015 339.247V485.979C52.4015 503.1 66.3353 516.979 83.4562 516.979H1009.95C1027.07 516.979 1041 503.1 1041 485.979V138.004C1041 131.738 1039.1 125.619 1035.55 120.454L1002.63 72.5202C996.851 64.1011 987.292 59.0704 977.079 59.0704H696.487C688.149 59.0704 680.163 55.7117 674.331 49.7526L634.761 9.31818C628.918 3.34674 620.911 -0.0130005 612.556 0.000366211L30.9504 0.929993C13.849 0.957336 0 14.8285 0 31.93V257.215C0 264.871 2.83311 272.256 7.95355 277.948Z' fill='black'/%3E%3C/svg%3E");
      -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1041 517' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.95355 277.948L44.4479 318.514C49.5684 324.206 52.4015 331.591 52.4015 339.247V485.979C52.4015 503.1 66.3353 516.979 83.4562 516.979H1009.95C1027.07 516.979 1041 503.1 1041 485.979V138.004C1041 131.738 1039.1 125.619 1035.55 120.454L1002.63 72.5202C996.851 64.1011 987.292 59.0704 977.079 59.0704H696.487C688.149 59.0704 680.163 55.7117 674.331 49.7526L634.761 9.31818C628.918 3.34674 620.911 -0.0130005 612.556 0.000366211L30.9504 0.929993C13.849 0.957336 0 14.8285 0 31.93V257.215C0 264.871 2.83311 272.256 7.95355 277.948Z' fill='black'/%3E%3C/svg%3E");

      /* Control how the mask is applied */
      mask-size: 100% 100%; /* Stretch mask SVG to fit element size */
      mask-position: center;
      mask-repeat: no-repeat;
      -webkit-mask-size: 100% 100%;
      -webkit-mask-position: center;
      -webkit-mask-repeat: no-repeat;



      /* --- Other styles --- */
      border: none;
      padding: 30px 20px;
      max-width: 600px;
      height: 320px;
      width: 90%;
      text-align: center;
      gap: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      transform: scale(1.6) translateY(80px); /* Your transform */

      /* Optional shadow - respects the mask */
      filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.534))
              drop-shadow(0 5px 15px rgba(0, 0, 0, 0.379));

      /* Clean up */
      background-size: auto;
      background-position: initial;
      background-repeat: initial;
      border-radius: 0;
    }
/* NEW: Text Positioning Adjustments - Move "Select Mode" higher, subtitle closer */
.mode-card .mode-header h2 {
  margin: 0 0 5px 0; /* REDUCED: Less bottom margin for higher position */
  padding-top: 35px; /* NEW: Top padding inside SVG top curve */
  font-size: 2.0rem; /* Slightly smaller for fit */
}

.mode-card .mode-header p {
  font-size: 0.7rem; /* REDUCED: Smaller subtitle */
  margin: 0 0 15px 0; /* REDUCED: Less bottom margin, closer to buttons */
  padding-bottom: 5px; /* NEW: Bottom padding to avoid SVG bottom curve */
}

.mode-card .mode-selection {
  margin-top: -5px; /* Pulls buttons up 15px; increase to -20px for more upward shift */
  display: flex;
  justify-content: center;
  gap: 20px; /* Keeps space between buttons */
}

/* NEW: Wrapper for Legendium SVG - Left-aligned with reduced size */
.legendium-wrapper {
  display: flex;
  align-items: center;
  justify-content: flex-start; /* Pushes SVG to left */
  width: 100%;
  margin-bottom: 10px; /* Space below SVG before header */
  margin-left: 40px;
}

.legendium-wrapper img {
  width: 100px; /* REDUCED: Adjust to 60px for even smaller or 100px for larger */
  height: auto; /* Maintains aspect ratio */
  flex-shrink: 0; /* Prevents shrinking */
}

/* NEW: Two-line header styling - Centered, stacked lines */

/* UPDATED: Adjust .mode-card to accommodate left-aligned SVG */

    /* Exit Confirmation Modal Styles */
    #exit-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(11, 11, 12, 0.95);
      z-index: 10001;
      align-items: center;
      justify-content: center;
      font-family: 'Inter', sans-serif; /* Updated to modern Inter for modal */
      backdrop-filter: blur(5px);
    }
    #exit-modal .modal-content {
      background: rgba(20, 20, 22, 0.9);
      border-radius: 24px;
      padding: 40px 32px;
      text-align: center;
      max-width: 420px;
      width: 90%;
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #f5fef8;
    }
    #exit-modal h3 {
      font-size: 1.8rem;
      margin: 0 0 16px;
      color: #b5ffcd;
      font-weight: 600;
      font-family: 'Poppins', sans-serif; /* Elegant heading font */
    }
    #exit-modal p {
      margin: 0 0 32px;
      opacity: 0.85;
      font-size: 1rem;
      line-height: 1.5;
      font-family: 'Inter', sans-serif;
    }
    #exit-modal .modal-actions {
      display: flex;
      justify-content: center;
      gap: 16px;
    }
    #exit-modal .btn-exit {
      padding: 12px 28px;
      font-weight: 700;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: linear-gradient(90deg, #ef4444, #dc2626);
      color: #fff;
      font-family: 'Inter', sans-serif;
    }
    #exit-modal .btn-exit:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 22px rgba(239, 68, 68, 0.4);
    }
    #exit-modal .btn-cancel {
      padding: 12px 28px;
      font-weight: 700;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: transparent;
      color: #e6ffee;
      font-family: 'Inter', sans-serif;
    }
    #exit-modal .btn-cancel:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: scale(1.05);
    }

/* New Loading Screen Styles */
#new-loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  font-family: 'Inter', sans-serif;
}

#new-loading-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1;
}

#new-loading-bar-container {
  position: absolute;
  bottom: 60px;
  left: 0;
  right: 0;
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
  z-index: 2;
}

#new-loading-bar {
  height: 100%;
  background: linear-gradient(90deg, #08f0e0, #0199bb);
  width: 0%;
  transition: width 0.3s ease;
}

.new-loading-progress {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  color: #fff;
  font-size: 1.2rem;
  font-weight: 500;
  letter-spacing: 0.5px;
  z-index: 2;
  text-align: center;
}
  </style>
  <script type="module" crossorigin src="/assets/experience-B1zanbBl.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/modulepreload-polyfill-B5Qt9EMX.js">
  <link rel="modulepreload" crossorigin href="/assets/three.module-D-hBrfRD.js">
  <link rel="stylesheet" crossorigin href="/assets/experience-DOC3ARB2.css">
</head>
<svg width="0" height="0" style="position:absolute; top: -1000px; left: -1000px;">
  <defs>
    <clipPath id="modeCardShapeClipAccurate"> <path d="M7.95355 277.948L44.4479 318.514C49.5684 324.206 52.4015 331.591 52.4015 339.247V485.979C52.4015 503.1 66.3353 516.979 83.4562 516.979H1009.95C1027.07 516.979 1041 503.1 1041 485.979V138.004C1041 131.738 1039.1 125.619 1035.55 120.454L1002.63 72.5202C996.851 64.1011 987.292 59.0704 977.079 59.0704H696.487C688.149 59.0704 680.163 55.7117 674.331 49.7526L634.761 9.31818C628.918 3.34674 620.911 -0.0130005 612.556 0.000366211L30.9504 0.929993C13.849 0.957336 0 14.8285 0 31.93V257.215C0 264.871 2.83311 272.256 7.95355 277.948Z"/>
    </clipPath>
  </defs>
</svg>

<body>

  <!-- Scene Selection Screen -->
  <!-- <div id="scene-selection" class="selection-screen" style="display: none;">
    <div class="scene-select-wrap">
      <div class="scene-select-header">
        <h2>Select Scene</h2>
        <p>Only explored scenes are unlocked. Locked scenes will become available after you explore them.</p>
      </div>
      <div id="scenes-grid" class="scenes-grid">
        <div class="scene-card locked" data-scene="scene1"><div class="scene-badge">Scene 1</div><div class="scene-title">Mystical Forest</div><div class="lock-icon">ðŸ”’</div></div>
        <div class="scene-card locked" data-scene="scene2"><div class="scene-badge">Scene 2</div><div class="scene-title">Futuristic City</div><div class="lock-icon">ðŸ”’</div></div>
        <div class="scene-card locked" data-scene="scene3"><div class="scene-badge">Scene 3</div><div class="scene-title">Robotics University</div><div class="lock-icon">ðŸ”’</div></div>
        <div class="scene-card locked" data-scene="scene4"><div class="scene-badge">Scene 4</div><div class="scene-title">Underground Lab</div><div class="lock-icon">ðŸ”’</div></div>
        <div class="scene-card locked" data-scene="scene5"><div class="scene-badge">Scene 5</div><div class="scene-title">Robotic Assembly</div><div class="lock-icon">ðŸ”’</div></div>
      </div>
      <div class="scene-select-actions">
        <button id="proceed-scene-btn" class="btn btn-primary" disabled>Continue</button>
        <button id="skip-to-default-btn" class="btn btn-secondary" style="display:none;">Start at Scene 1</button>
      </div>
      <div id="scene-helper" class="helper"></div>
    </div>
  </div> -->

  <!-- Mode Selection Screen -->
  <div id="mode-selection" class="selection-screen" style="display: none;">
    <div class="mode-card">
      <div class="legendium-wrapper">
        <img src="/LEGENDIUM.svg" alt="Legendium" />
      </div>
      <div class="mode-header">
        <h2>CHOOSE<br>EXPERIENCE MODE</h2>
      </div>
        <div class="mode-selection">
          <button id="vr-mode-button" class="mode-button"><span class="button-text">VR</span></button>
          <button id="non-vr-mode-button" class="mode-button"><span class="button-text">WEB</span></button>
        </div>
      </div>
    </div>
  </div>

  <div id="character-selection" class="selection-screen" style="display: none;">
    <div class="svg-parent-card">

      <div class="legendium-wrapper1">
        <img src="/LEGENDIUM.svg" alt="Legendium" />
      </div>
      <div class="character-cards-section">
        <div class="character-card" data-character="characters/EMLY 4.glb">
          <div class="card-image" style="background-image: url('./emily1.jpg');"></div>
          <div class="card-overlay">
            <div class="character-info">
              <h3>EMILY</h3>
              <span>EXPLORER</span>
            </div>
          </div>
        </div>
        <div class="character-card" data-character="characters/tomy_v3-opt 1 1.glb">
          <div class="card-image" style="background-image: url('./john.jpg');"></div>
          <div class="card-overlay">
            <div class="character-info">
              <h3>JOHN</h3>
              <span>TECHNICIAN</span>
            </div>
          </div>
        </div>
      </div>

      <div class="start-section">
         <button id="start-experience-btn" class="start-button">
           <span class="button-text">START EXPERIENCE</span>
         </button>
      </div>

    </div>
  </div>

  <!-- New Loading Screen -->
  <div id="new-loading-screen">
    <img id="new-loading-image" src="" alt="Loading Scene" />
    <div id="new-loading-bar-container">
      <div id="new-loading-bar"></div>
    </div>
    <div class="new-loading-progress">0%</div>
  </div>

  <!-- Exit Confirmation Modal -->
  <!-- <div id="exit-modal">
    <div class="modal-content">
      <h3>Exit Game?</h3>
      <p>All progress will be lost. Are you sure you want to exit from the game?</p>
      <div class="modal-actions">
        <button id="confirm-exit" class="btn-exit">Exit</button>
        <button id="cancel-exit" class="btn-cancel">Cancel</button>
      </div>
    </div>
  </div> -->

  <div id="container"></div>
  <canvas id="scene" class="webgl" style="display: none;"></canvas>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

</body>
</html>